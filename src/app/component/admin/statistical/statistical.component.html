<div class="container">
  <h2>Total likes and ratings statistics</h2>

  <!-- Bộ lọc -->
  <div class="filter-container">
    <input type="text" [formControl]="searchForm.controls.searchText" placeholder="Search product..." />
    <input type="number" [formControl]="searchForm.controls.minStars" placeholder="Minimum number of stars" />
    <button (click)="resetFilter()">Reset</button>
  </div>

  <div *ngIf="products.length > 0; else noData">
    <table class="product-table">
      <thead>
      <tr>
        <th>STT</th>
        <th (click)="sortData('productVariantId')">
          ID <span *ngIf="sortColumn === 'productVariantId'">{{ sortDirection === 'asc' ? '▲' : '▼' }}</span>
        </th>
        <th (click)="sortData('productName')">
          Product Name <span *ngIf="sortColumn === 'productName'">{{ sortDirection === 'asc' ? '▲' : '▼' }}</span>
        </th>
        <th>Color</th>
        <th>Image</th>
        <th>Size</th>
        <th (click)="sortData('totalPrice')">
          Price<span *ngIf="sortColumn === 'totalPrice'">{{ sortDirection === 'asc' ? '▲' : '▼' }}</span>
        </th>
        <th (click)="sortData('totalStart')">
          Number of stars <span *ngIf="sortColumn === 'totalStart'">{{ sortDirection === 'asc' ? '▲' : '▼' }}</span>
        </th>
        <th (click)="sortData('totalWishList')">
          Wishlist number <span *ngIf="sortColumn === 'totalWishList'">{{ sortDirection === 'asc' ? '▲' : '▼' }}</span>
        </th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let product of products; let i = index"  [routerLink]="['/admin/inventory-statistics']">
        <td>{{ i + 1 + (currentPage * pageSize) }}</td>
        <td>{{ product.productVariantId }}</td>
        <td>{{ product.productName }}</td>
        <td>{{ product.color }}</td>
        <td><img [src]="getImageProduct(product.imageUrl)" alt="Product Image" class="product-image" /></td>
        <td>{{ product.size }}</td>
        <td>{{ product.totalPrice | currency }}</td>
        <td>{{ product.totalStart }}</td>
        <td>{{ product.totalWishList }}</td>
      </tr>
      </tbody>
    </table>

    <div class="pagination">
      <button (click)="prevPage()" [disabled]="currentPage === 0">Previous page</button>
      <span>Page {{ currentPage + 1 }} / {{ totalPages }}</span>
      <button (click)="nextPage()" [disabled]="currentPage >= totalPages - 1">Next page</button>
    </div>
  </div>

  <!-- Phân trang -->


  <ng-template #noData>
    <p>No data!</p>
  </ng-template>
</div>

