<div class="container-fluid">
  <h2 class="text-center my-3">Thống kê doanh thu</h2>


  <!-- Hiển thị doanh thu -->
  <div class="row mb-4">
    <div class="col-md-4">
      <div class="card text-center shadow">
        <div class="card-body">
          <h5 class="card-title">Doanh thu ngày</h5>
          <p class="card-text text-success fs-4">{{ dailyRevenue | currency:'VND' }}</p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center shadow">
        <div class="card-body">
          <h5 class="card-title">Doanh thu tháng</h5>
          <p class="card-text text-primary fs-4">{{ monthlyRevenue | currency:'VND' }}</p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center shadow">
        <div class="card-body">
          <h5 class="card-title">Doanh thu năm</h5>
          <p class="card-text text-warning fs-4">{{ yearlyRevenue | currency:'VND' }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Bộ lọc -->
  <div class="row mb-4">
    <div class="col-md-4">
      <label for="date">Chọn ngày:</label>
      <input id="date" type="date" class="form-control" [(ngModel)]="selectedDate" (change)="fetchRevenueData()">
    </div>
    <div class="col-md-4">
      <label for="month">Chọn tháng:</label>
      <input id="month" type="month" class="form-control" [(ngModel)]="selectedMonth" (change)="fetchRevenueData()">
    </div>
    <div class="col-md-4">
      <label for="year">Chọn năm:</label>
      <input id="year" type="number" class="form-control" [(ngModel)]="selectedYear" (change)="fetchRevenueData()">
    </div>
  </div>

  <!-- Biểu đồ doanh thu -->
<!--  <div class="card shadow mb-4">-->
<!--    <div class="card-body">-->
<!--      <h5 class="card-title text-center">Biểu đồ doanh thu</h5>-->
<!--      <apx-chart-->
<!--        *ngIf="revenueChart?.xaxis"-->
<!--        [series]="revenueChart.series"-->
<!--        [chart]="revenueChart.chart"-->
<!--        [xaxis]="revenueChart.xaxis">-->
<!--      </apx-chart>-->

<!--    </div>-->
<!--  </div>-->

  <!-- Top 10 sản phẩm bán chạy -->
  <h3 class="text-center my-4">Top 10 sản phẩm bán chạy</h3>
  <table class="table table-bordered table-hover">
    <thead class="table-dark">
    <tr>
      <th>#</th>
      <th>Hình ảnh</th>
      <th>Tên sản phẩm</th>
      <th>Màu sắc</th>
      <th>Kích thước</th>
      <th>Số lượng bán</th>
      <th>Tổng doanh thu</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let product of topProducts | paginate: { itemsPerPage: 5, currentPage: currentPage }; let i = index">
      <td>{{ (currentPage - 1) * 5 + i + 1 }}</td>
      <td><img [src]="getImageProduct(product.imageUrl)" alt="Hình ảnh" class="img-thumbnail" width="50"></td>
      <td>{{ product.productName }}</td>
      <td>
        <span class="color-box" [ngStyle]="{'background-color': product.color}"></span>
        {{ product.color }}
      </td>
      <td>{{ product.size }}</td>
      <td>{{ product.totalSold }}</td>
      <td>{{ product.totalRevenue | currency:'VND' }}</td>
    </tr>
    <tr *ngIf="topProducts.length === 0">
      <td colspan="7" class="text-center text-muted">Không có dữ liệu</td>
    </tr>
    </tbody>
  </table>

  <!-- Nút phân trang -->
  <div class="d-flex justify-content-center my-3">
    <pagination-controls (pageChange)="currentPage = $event"></pagination-controls>
  </div>
</div>
